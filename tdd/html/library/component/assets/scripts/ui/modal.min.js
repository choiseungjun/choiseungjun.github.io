!function(e,t,o){"use strict";var n=e(document),a=e(window),i=t.detect,l=t.ui,s=i.isTouch,r=9e3;({init:function(t){var o=this;o.options=e.extend({},t),o.stack=[],o.active=null,o._bind()},_bind:function(){var t=this;a.on("resizeend.modalmanager",function(){for(var e,o=-1;e=t.stack[++o];)e.isShown&&e.center()}),n.on("modal:show.modalmanager",".ui_modal_container",function(o){var n=e(o.currentTarget).vcModal("instance"),a=t.nextZIndex();n.$overlay&&n.$overlay.css("zIndex",a++),n.$el&&n.$el.css("zIndex",a++),t.active=n,t.add(n)}).on("modal:hidden",".ui_modal_container",function(o){var n=e(o.currentTarget).vcModal("instance");t.revertZIndex(),t.remove(n),t.stack.length?t.active=t.stack[t.stack.length-1]:t.active=null}).on("focusin.modalmanager",function(o){t.active&&(t.active.$el[0]===o.target||e.contains(t.active.$el[0],o.target)||(t.active.$el.find(":focusable").first().focus(),o.stopPropagation()))}).on("click.modalmanager","[data-control=modal]",function(t){t.preventDefault();var o,n=e(this),a=n.attr("href")||n.attr("data-target");a&&(/^#/.test(a)?e(a).vcModal(n.data()).on("modal:hidden",function(t){n[0].focus(),e(this).off("modal:hidden")}):e.ajax({url:a}).done(function(t){(o=e('<div class="ui_modal ui_modal_ajax" style="display:none"></div>').html(t).appendTo("body")).vcModal(e.extend({removeOnClose:!0},n.data())).on("modal:hidden",function(e){n[0].focus(),o.off("modal:hidden")})}))})},add:function(e){this.stack.push(e)},remove:function(e){this.stack=t.array.remove(this.stack,e)},nextZIndex:function(){var e=r;return r+=2,e},revertZIndex:function(){r-=2}}).init();var d=l("Modal",{bindjQuery:"modal",defaults:{overlay:!0,clone:!0,closeByEscape:!0,removeOnClose:!1,draggable:!0,dragHandle:"header h1",show:!0,effect:"fade",cssTitle:".ui_modal_title"},events:{"click button[data-role]":function(t){var o,n=this,a=e(t.currentTarget).attr("data-role")||"";a&&(n.triggerHandler(o=e.Event("modal:"+a),[n]),o.isDefaultPrevented())||this.hide()},"click .ui_modal_close":function(e){e.preventDefault(),e.stopPropagation(),this.hide()}},initialize:function(e,o){var n=this;!1!==n.supr(e,o)&&(n._createHolder(),!1!==n.options.overlay&&n._overlay(),n.$el.addClass("ui_modal_container"),n.isShown=!1,n._originalDisplay=n.$el.css("display"),n.options.show&&setTimeout(function(){t.util.waitImageLoad(n.$("img")).done(function(){n.show()})}))},_bindAria:function(){var e=this;e.$el.attr({role:"dialog","aria-hidden":"false","aria-describedby":e.$("section").attr("id")||e.$("section").attr("id",e.cuid+"_content").attr("id"),"aria-labelledby":e.$("h1").attr("id")||e.$("h1").attr("id",e.cuid+"_title").attr("id")})},_createHolder:function(){var t=this;t.$el.parent().is("body")||(t.$holder=e('<span class="ui_modal_holder" style="display:none;"></span>').insertAfter(t.$el),t.$el.appendTo("body"))},_replaceHolder:function(){var e=this;e.$holder&&(e.$el.insertBefore(e.$holder),e.$holder.remove())},toggle:function(){var e=this;e[e.isShown?"hide":"show"]()},show:function(){if(!this.isShown){var t=this,o=t.options,n=e.Event("modal:show");if(t.trigger(n),!n.isDefaultPrevented()){t.isShown=!0,o.title&&t.$(o.cssTitle).html(o.title||"알림"),t.layout();var a=e.Deferred();"fade"===o.effect?t.$el.hide().fadeIn("slow",function(){a.resolve()}):"slide"===o.effect?t.$el.css("top",-t.$el.height()).animate({top:"50%"},function(){a.resolve()}):a.resolve(),a.done(function(){t.trigger("modal:shown",{module:t}),t._bindAria(),t._draggabled(),t._escape(),t.on("mousewheel",function(e){e.stopPropagation()});var e=t.$el.find("[data-autofocus=true]");e.size()>0?e.eq(0).focus():t.$el.attr("tabindex",0).focus(),(e=t.$("[data-autofocus=true]")).size()>0?e.eq(0).focus():t.$el.attr("tabindex",0).focus()})}}},hide:function(t){t&&t.preventDefault();var o=this;if(t=e.Event("modal:hide"),o.trigger(t),o.isShown&&!t.isDefaultPrevented()){var n=e.Deferred();o.isShown=!1,"fade"===o.options.effect?o.$el.fadeOut("slow",function(){n.resolve()}):"slide"===o.options.effect?o.$el.animate({top:-o.$el.outerHeight()},function(){n.resolve()}):n.resolve(),n.done(function(){o.trigger("modal:hidden"),o.$el.removeClass("ui_modal_container"),o._escape(),o._replaceHolder(),o.options.removeOnClose&&o.$el.remove(),o.$overlay&&(o.$overlay.remove(),o.$overlay=null),o.destroy()})}},layout:function(){var e,o,n,a=this,i=t.dom.getWinHeight();a.isShown||a.$el.css({display:"inline"}),e=a.$el.outerWidth(),o={display:"",position:"absolute",backgroundColor:"#ffffff",outline:"none",backgroundClip:"padding-box",top:(n=a.$el.outerHeight()>i)?0:"50%",left:"50%",marginLeft:-1*Math.ceil(e/2),marginTop:n?"":-1*Math.ceil(e/2)},a.$el.stop().css(o)},_draggabled:function(){var e=this,o=e.options;o.draggable&&!e.bindedDraggable&&(e.bindedDraggable=!0,o.dragHandle&&(e.$el.css("position","absolute"),t.css3.prefix("user-select")&&e.$(o.dragHandle).css(t.css3.prefix("user-select"),"none"),e.on("mousedown touchstart",o.dragHandle,function(t){t.preventDefault();var o,a=!0,i=e.$el.position(),l={left:t.pageX-i.left,top:t.pageY-i.top};n.on(e.makeEventNS("mousemove mouseup touchmove touchend touchcancel"),o=function(t){switch(console.log(e.cuid),t.type){case"mousemove":case"touchmove":if(!a)return;e.$el.css({left:t.pageX-l.left,top:t.pageY-l.top});break;case"mouseup":case"touchend":case"touccancel":a=!1,n.off(e.getEventNS(),o)}})}),e.$(o.dragHandle).css("cursor","move")))},_enforceFocus:function(){if(s){var t=this,o=t.$el.find("[data-autofocus=true]");o.size()>0?o.eq(0).focus():t.$el.attr("tabindex",0).focus(),n.off("focusin"+t.getEventNS()).on("focusin"+t.getEventNS(),t.proxy(function(o){t.$el[0]===o.target||e.contains(t.$el[0],o.target)||(t.$el.find(":focusable").first().focus(),o.stopPropagation())}))}},_escape:function(){if(s){var e=this;e.isShown&&e.options.closeByEscape?e.off("keyup").on("keyup",e.proxy(function(t){27===t.which&&e.hide()})):e.off("keyup")}},_overlay:function(){var t=this;if(!t.options.overlay||t.$overlay)return!1;t.$overlay=e('<div class="ui_modal_overlay" />'),t.$overlay.css({backgroundColor:"#ffffff",opacity:.6,position:"fixed",top:0,left:0,right:0,bottom:0}).appendTo("body"),t.$overlay.off("click.modal").on("click.modal",function(e){e.target==e.currentTarget&&(t.$overlay.off("click.modal"),t.hide())})},center:function(){this.layout()},open:function(){this.show()},close:function(){this.hide()},destroy:function(){this.supr()}});t.modal=function(t,o){e(t).modal(o)},t.ui.ajaxModal=function(t,o){setTimeout(function(){var n=e('<div class="ui_modal" style="display: none;">').appendTo("body");n.load(t,function(){n.modal(e.extend(o,{removeOnClose:!0}))})},1e3)},t.ui.alert=function(o,n){"string"!=typeof o&&0===arguments.length&&(n=o,o="");var a=e(t.ui.alert.tmpl).appendTo("body").find("div.ui_modal_content").html(o).end(),i=new d(a,t.extend({removeOnClose:!0},n));return i.getElement().buildUIControls(),i.on("modalhidden",function(){a=null,i=null}),i},t.ui.alert.tmpl=['<div class="layer_popup small ui_alert" role="alert" style="display:none">','<h1 class="title ui_modal_title">알림창</h1>','<div class="cntt">','<div class="ui_modal_content">&nbsp;</div>','<div class="wrap_btn_c">','<button type="button" class="btn_emphs_small" data-role="ok"><span><span>확인</span></span></button>',"</div>","</div>",'<button type="button" class="ui_modal_close"><span>닫기</span></button>','<span class="shadow"></span>',"</div>"].join(""),"function"==typeof define&&define.amd&&define([],function(){return d})}(jQuery,window[LIB_NAME]);