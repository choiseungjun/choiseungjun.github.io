!function(t,i,o){i.ui("Masonry",{defaults:{itemWidth:310,space:18,scrollLoad:!1,itemSelector:"div.ui_item"},initialize:function(t,o){var e=this;!1!==e.supr(t,o)&&i.uitl.lazyLoadImage(e.$("img")).done(function(){e.init(),e._configure(),e.update()})},init:function(){var o=this,e=null,n=i.util.getDocHeight;o.options.scrollLoad&&t(window).on("scroll.masonry",function(){clearTimeout(e),e=setTimeout(function(){var i=t(this).height(),e=t(this).scrollTop();n()-100<i+e&&o.update(o.$el.find(o.options.itemSelector).length)},400)})},_configure:function(){var t=this,i=t.options;t._width=t.$el.width(),t._itemWidth=i.itemWidth+i.space,t._colCount=Math.ceil(t._width/t._itemWidth),t._colsHeight=[];for(var o=0;o<t._colCount;o++)t._colsHeight[o]=0},_getMinCol:function(){for(var t=this._colsHeight,i=0,o=0,e=t.length;o<e;o++)t[o]<t[i]&&(i=o);return i},_getMaxCol:function(){for(var t=this._colsHeight,i=0,o=0,e=t.length;o<e;o++)t[o]>t[i]&&(i=o);return i},update:function(i){i=i||0;var o=this,e=o.options.space,n=o.$el.find(o.options.itemSelector).filter(function(t){return t>=i});o.$el.css("visibility","hidden").show(),n.each(function(i){var n,l,c=t(this),h=c.width(),s=c.height(),r=h>o._itemWidth;n=o._getMinCol(),l=o._colsHeight[n],r&&(n===o._colCount-1&&(n=0),o._colsHeight.length>n&&(l=Math.max(o._colsHeight[n],o._colsHeight[n+1]),o._colsHeight[n+1]=l+s+e)),o._colsHeight[n]=l+s+e,c.css({top:l,left:n*o._itemWidth})}),col=o._getMaxCol(o._colsHeight),o.$el.css({height:o._colsHeight[col]-e,visibility:""}),n.fadeIn()}})}(jQuery,window[LIB_NAME]);