!function(e,n,t){"use strict";if(!n.ui.RangeSlider){e(document);var a=n.detect.isTouch,i=n.ui("RangeSlider",{bindjQuery:"rangeSlider",defaults:{values:"[]",input:"0,25",range:"0,100"},selectors:{bg:".ui-range-slider-bg",btnMin:".ui-range-slider-min-btn",btnMax:".ui-range-slider-max-btn",rangeBar:".ui-range-slider-range",values:".ui-range-slider-value"},templates:{contents:'<div class="ui-range-slider-bg"></div><div class="ui-range-slider-range"></div>{{#if list.length > 0}}<ul class="ui-range-slider-value">{{#each item in list}}<li data-value="{{item.value}}" data-title="{{item.title}}"></li>{{/each}}</ul>{{/if}}{{#if isMin}}<a href="#" class="ui-range-slider-min-btn ui-range-slider-handler"><span class="hide"></span></a>{{/if}}<a href="#" class="ui-range-slider-max-btn ui-range-slider-handler"><span class="hide"></span></a>'},initialize:function(e,n){var t=this;!1!==t.supr(e,n)&&(t._build(),t._resize(),t._syncInput(),t._bindEvents())},_build:function(){var t=this;t.isMouseDown=!1,t.originValue=null;try{n.isString(t.options.values)?t.valuesArr=JSON.parse(t.options.values):t.valuesArr=t.options.values||[]}catch(e){t.valuesArr=[]}var a=t.options.range.toString().split(",");t.valuesArr.length>0?(t.minValue=t.valuesArr[0].value,t.maxValue=t.valuesArr[t.valuesArr.length-1].value):(t.minValue=void 0!=a[0]?a[0]:0,t.maxValue=void 0!=a[1]?a[1]:100);var i=t.options.input.toString().split(",");t.startValue=void 0!=i[0]?i[0]:t.minValue,t.endValue=void 0!=i[1]?i[1]:t.maxValue;var s=1==i.length;s&&(t.endValue=t.startValue),n.isNumber(parseFloat(t.startValue))||n.isNumber(parseFloat(t.endValue))||(t.$minInput=e(t.startValue),t.startValue=t.$minInput.val(),t.$maxInput=e(t.endValue),t.endValue=t.$maxInput.val(),t.startValue&&t.endValue?s=!1:(t.startValue&&(t.endValue=t.startValue,t.$maxInput=t.$minInput),s=!0)),t.$el.addClass("ui-range-slider"),t.$el.append(t.templated.contents({list:t.valuesArr,isMin:!s})),t.updateSelectors(),t.endValue-t.startValue<0&&(t.endValue=t.maxValue),t.isSnap=t.valuesArr.length>0,t.$el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)")},setValue:function(e,n){var t=this,a=e,i=n;void 0==i&&(a=t.minValue,i=e),t._setValue(a,i),t._syncInput(),t.triggerHandler("rangeSliderchanged",[t.getValue()])},_setValue:function(e,n){var t,a,i=this,s=i._getDistance(e),l=i._getDistance(n);t=i._getSnapIndex(e),a=i._getSnapIndex(n),i.valuesArr.length>0&&t==a&&(i.valuesArr.length-1>t&&t>0?(s=i._getDistance(i.valuesArr[t-1].value),l=i._getDistance(i.valuesArr[t].value)):(s=i._getDistance(i.valuesArr[0].value),l=i._getDistance(i.valuesArr[0].value))),i.$btnMin[0]?i.$btnMin.css("left",s):s=0,i.$btnMax[0]?i.$btnMax.css("left",l):l=i.rangeWidth,i.$rangeBar.css({left:s+i.btnSize/2,width:l-s}),i.isSnap&&i._snapMove()},_bindEvents:function(){var n=this;n.on("click",function(e){e.preventDefault(),a&&e.stopPropagation(),n._move(n._getX(e)),n.isSnap&&n._snapMove(),n._syncInput(),n.triggerHandler("rangeSliderchanged",[n.getValue()])}),e(window).on("resizeend."+n.cid,function(e){n.originValue=n.getValue(),n._resize()}),n.on("mousedown touchstart",".ui-range-slider-handler",function(t){t.preventDefault(),a&&t.stopPropagation();var i=e(this);return n.isMouseDown=!0,e(document).off("."+n.cid).on("mouseup."+n.cid+" touchend."+n.cid+" mousemove."+n.cid+" touchmove."+n.cid,function(t){if(n.isMouseDown)switch(t.type){case"mouseup":case"touchend":n.isMouseDown=!1,n.isSnap&&n._snapMove(i),n._syncInput(),n.triggerHandler("rangeSliderchanged",[n.getValue()]),e(document).off("."+n.cid);break;case"mousemove":case"touchmove":n._move(n._getX(t),i),t.preventDefault()}else e(document).off("."+n.cid)}),!1}).on("keydown",".ui-range-slider-handler",function(t){var a,i=e(this);switch(a=n.valuesArr.length>0?n._getSnapIndex(n._convertValue(i.position().left+n.elLeft+n.btnSize/2)):i.position().left+n.elLeft+n.btnSize/2,t.keyCode){case 37:a-=n.distance,t.stopPropagation(),t.preventDefault();break;case 39:a+=n.distance,t.stopPropagation(),t.preventDefault()}n._move(n.valuesArr.length>0?n._getDistance(n.valuesArr[a].value):a,i),n.isSnap&&n._snapMove(i),n._syncInput(),n.triggerHandler("rangeSliderchanged",[n.getValue()])})},_syncInput:function(){var e=this,n=e.getValue(),t=e._getSnapIndex(n.minValue),a=e._getSnapIndex(n.maxValue),i=t>-1?e.$values.children().eq(t).data("title"):n.minValue,s=a>-1?e.$values.children().eq(a).data("title"):n.maxValue;e.$btnMin[0]&&e.$btnMax[0]?(e.$btnMin.find("span.hide").text(i+"에서"),e.$btnMax.find("span.hide").text(s+"까지")):e.$btnMin[0]?e.$btnMin.find("span.hide").text(i+"에서"+s+"까지"):e.$btnMax.find("span.hide").text(s),e.$minInput&&e.$minInput.val(i),e.$maxInput&&e.$maxInput.val(s),e.$values.children().removeClass("on").eq(t).addClass("on").end().eq(a).addClass("on")},_getX:function(e){return a&&e.originalEvent.touches&&(e=e.originalEvent.touches[0]),e.pageX},_getSnapIndex:function(e){for(var n=this,t=1/0,a=1/0,i=-1,s=0;s<n.valuesArr.length;s++)t>=(a=Math.abs(parseFloat(n.valuesArr[s].value)-parseFloat(e)))&&(t=a,i=s);return i},_getDistance:function(e){var n=this;return(e-n.minValue)/((n.maxValue-n.minValue)/n.rangeWidth)},_convertValue:function(e){var n=this;return(n.maxValue-n.minValue)/n.rangeWidth*e+n.minValue},_getSnapDistance:function(e){var n=this,t=n._getSnapIndex(e),a=n.valuesArr[t].value;return t<0?0:n._getDistance(a)},_snapMove:function(e){var n=this,t=n.getValue(),a=t.minValue,i=t.maxValue,s=n._getSnapDistance(a),l=n._getSnapDistance(i);if(e)s==l&&n.isRangeSlider&&(e[0]==n.$btnMax[0]?l=n._getDistance(n.valuesArr[n._getSnapIndex(i)+1].value):s=n._getDistance(n.valuesArr[n._getSnapIndex(a)-1].value));else if(s==l&&n.isRangeSlider)return;n.$btnMin[0]&&n.$btnMin.css("left",s),n.$btnMax[0]&&n.$btnMax.css("left",l),n.$rangeBar.css({left:s+n.btnSize/2,width:l-s})},_move:function(e,n){var t=this,a=e-t.elLeft-t.btnSize/2;a>t.rangeWidth&&(a=t.rangeWidth),a<0&&(a=0);var i=t.$btnMin[0]?t.$btnMin.position().left:0,s=t.$btnMax[0]?t.$btnMax.position().left:t.rangeWidth;n?n[0]==t.$btnMax[0]?(a<=i&&(a=i),t.$btnMax[0]&&t.$btnMax.css("left",a)):n[0]==t.$btnMin[0]&&(a>=s&&(a=s),t.$btnMin[0]&&t.$btnMin.css("left",a)):Math.abs(i-a)<Math.abs(s-a)?t.$btnMin[0]?t.$btnMin.css("left",a):t.$btnMax[0]&&t.$btnMax.css("left",a):t.$btnMax[0]?t.$btnMax.css("left",a):t.$btnMin[0]&&t.$btnMin.css("left",a);var l=t.$btnMin[0]?t.$btnMin.position().left:0,r=t.$btnMax[0]?t.$btnMax.position().left:t.rangeWidth;t.$rangeBar.css({left:l+t.btnSize/2,width:r-l})},_resize:function(){var n,t,a,i,s=this,l=s.$el.height()/2;s.isRangeSlider=!(!s.$btnMin[0]||!s.$btnMax[0]),s.$btnMax[0]?s.btnSize=s.$btnMax.width():s.$btnMin[0]?s.btnSize=s.$btnMin.width():s.btnSize=20,s.rangeWidth=s.$el.width()-s.btnSize,s.elLeft=s.$el.offset().left,s.distance=s.valuesArr.length>0?1:Math.round(s.rangeWidth/10),s.$values.css({position:"absolute",left:s.btnSize/2}),a=s.$bg.height()/2,s.$bg.css({width:s.rangeWidth,left:s.btnSize/2,top:l-a}),s.$rangeBar.css({top:l-a}),t=s.$btnMin.height()/2,s.$btnMin.css({top:l-t+a}),t=s.$btnMax.height()/2,s.$btnMax.css({top:l-t+a}),s.$values.children().each(function(a,l){n=e(l).width()/2,t=e(l).height()/2,i=s._getDistance(s.valuesArr[a].value),e(l).css({position:"absolute",left:i-n})}),s.originValue?s._setValue(s.originValue.minValue,s.originValue.maxValue):s._setValue(s.startValue,s.endValue)},getValue:function(){var e=this,n=e.$btnMin[0]?e.$btnMin.position().left:0,t=e.$btnMax[0]?e.$btnMax.position().left:e.rangeWidth;return{minValue:Math.round((e.maxValue-e.minValue)/e.rangeWidth*n+parseFloat(e.minValue)),maxValue:Math.round((e.maxValue-e.minValue)/e.rangeWidth*t+parseFloat(e.minValue))}},update:function(e){var n=this;n._build(),n._resize(),n._syncInput(),e||n.triggerHandler("rangeSliderchanged",[n.getValue()])}});"function"==typeof define&&define.amd&&define([],function(){return i})}}(jQuery,window[LIB_NAME]);